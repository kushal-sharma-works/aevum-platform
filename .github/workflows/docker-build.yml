name: Docker Build

on:
  push:
    branches: [main, feature/**]
  pull_request:
    branches: [main]

jobs:
  build-images:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: docker/setup-buildx-action@v3

      - name: Build event-timeline image
        run: docker build -t aevum-event-timeline:ci -f services/event-timeline/Dockerfile services/event-timeline

      - name: Build decision-engine image
        run: docker build -t aevum-decision-engine:ci -f services/decision-engine/Dockerfile services/decision-engine

      - name: Build query-audit image
        run: docker build -t aevum-query-audit:ci -f services/query-audit/Dockerfile services/query-audit

      - name: Build aevum-ui image
        run: docker build -t aevum-ui:ci -f frontend/aevum-ui/Dockerfile frontend/aevum-ui
